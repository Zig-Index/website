---
import Layout from "@/layouts/Layout.astro";
import { TermsPage } from "../components/TermsPage";
import { loadRegistryData } from "../lib/registryLoader";

// Load registry data for search functionality
const allEntries = await loadRegistryData();

// Prepare search items for navbar
const searchItems = allEntries.map(e => ({
  name: e.name,
  owner: e.owner,
  repo: e.repo,
  description: e.description,
  category: e.category,
  type: e.type,
  fullName: `${e.owner}/${e.repo}`,
}));

const pageTitle = "Terms of Service | Zig Index";
const pageDescription = "Terms of Service for Zig Index - Community guidelines and usage terms for the Zig package registry.";

const siteUrl = "https://zig-index.github.io";

const schema = {
  "@context": "https://schema.org",
  "@type": "WebPage",
  "name": "Terms of Service - Zig Index",
  "description": "Terms of service for Zig Index, a community-maintained index of Zig programming language packages and applications.",
  "url": `${siteUrl}/terms`,
  "publisher": {
    "@type": "Organization",
    "name": "Zig Index",
    "url": siteUrl
  }
};
---

<Layout title={pageTitle} description={pageDescription} schema={schema}>
  <TermsPage client:load searchItems={searchItems} />
</Layout>
