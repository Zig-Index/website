---
import Layout from "@/layouts/Layout.astro";
import { PrivacyPage } from "../components/PrivacyPage";
import { loadRegistryData } from "../lib/registryLoader";

// Load registry data for search functionality
const allEntries = await loadRegistryData();

// Prepare search items for navbar
const searchItems = allEntries.map(e => ({
  name: e.name,
  owner: e.owner,
  repo: e.repo,
  description: e.description,
  category: e.category,
  type: e.type,
  fullName: `${e.owner}/${e.repo}`,
}));

const pageTitle = "Privacy Policy | Zig Index";
const pageDescription = "Privacy Policy for Zig Index - Learn how we collect, use, and protect your information.";

const siteUrl = "https://zig-index.github.io";

const schema = {
  "@context": "https://schema.org",
  "@type": "WebPage",
  "name": "Privacy Policy - Zig Index",
  "description": "Privacy policy for Zig Index, a community-maintained index of Zig programming language packages and applications.",
  "url": `${siteUrl}/privacy`,
  "publisher": {
    "@type": "Organization",
    "name": "Zig Index",
    "url": siteUrl
  }
};
---

<Layout title={pageTitle} description={pageDescription} schema={schema}>
  <PrivacyPage client:load searchItems={searchItems} />
</Layout>
